<div class="">
  <div class="breadcrumb">
    <h4 class="pull-left"><span>{{isHq ? 'HO' : 'Buildings'}}</span> Master Bills <help-notes [context]="'Purchases:BillsStatusDefinition'" [type]="'popup'" [placement]="'bottom'" class="ml-10 float-right"></help-notes>
    </h4>
    <input type="text" placeholder="Service, Provider, Building, <10000, >5000, 1000-10000" [formControl]="searchControl" class="form-control form-control-rounde pull-left w-25 ml-10">
    <input class="form-control pull-left w-10 ml-5" autocomplete="off" placeholder="Bill From - To " name="dp" id="daterangepicker">
    <input class="form-control pull-left w-10 ml-5" autocomplete="off" placeholder="Accounted Month " name="adp" id="adaterangepicker">
    <button class="btn btn-outline-primary btn-icon float-left" ngbTooltip="Quick Filters" *ngIf="!moreFilters" (click)="moreFilters=true;loadBuildingBills()"><i class="fa fa-caret-square-o-down"></i></button>
    <button class="btn btn-outline-primary btn-icon float-left" ngbTooltip="Hide Filters" *ngIf="moreFilters" (click)="moreFilters=false;"><i class="fa fa-caret-square-o-up"></i></button>
    <ng-select class="w-30 float-left ml-10" [items]="['Draft','New','Raised','Approved','PrePaid','Paid','Deleted']" [multiple]="true" [closeOnSelect]="true" [hideSelected]="true" placeholder="Statuses" [(ngModel)]="filter.statuses" [ngModelOptions]="{standalone: true}" (ngModelChange)="resetList()"></ng-select>
    <help-notes [context]="'Purchases:BillStatusFlow'" [type]="'popup'" [placement]="'bottom'" class="ml-10"></help-notes>
    <!--  <button class="btn btn-outline-primar btn-sm  btn-primary btn-rounde btn-ico pull-right" (click)="openBillModal({})" *checkAccess="'purchases:modifyPurchaseOrders'">
      <i class="fa fa-plus"></i> Bill
    </button> -->
    <div class="clear"></div>
  </div>
  <div class="row" *ngIf="moreFilters">
    <div class="col-md-7 pt-2">
      <div *ngIf="!isHq">
        <span class="badge fs-12 mr-2 cursor" *ngFor="let building of buildingBills;" [ngClass]="{'badge-outline-primary':selectedBuilding?.id!=building?.id,'badge-primary':selectedBuilding?.id==building?.id}" (click)="selectBuilding(building)">{{building?.name}} ({{building?.count}})</span>
      </div>
    </div>
    <div class="col-md-5 pt-2">
      <span class="badge fs-14 mr-2 cursor" *ngIf="totalBillsCount>0">Total - {{totalBillsCount}} </span>
      <span class="badge fs-12 mr-2 cursor badge-outline-primary" *ngFor="let status of billsByStatuses;" (click)="filter.statuses=[status.status];resetList();">{{status?.status}} ({{status?.count}})</span>
      <!--  <hr class="pb-1 mt-2">
      <span class="d-ib  text-white ml-10 mr-1 pl-1 pr-1 fs-10 float-left cursor" (click)="filter.noImages=!filter.noImages; resetList();" [ngClass]="{'bg-danger':!filter.noImages,'bg-primary': filter.noImages}">No Image Bills : <strong>{{redBills}}</strong></span>
      <span class="d-ib pl-1 pr-1 fs-10 float-left cursor" ngbTooltip="Bills without ServiceProvider or OpexType or Building mapping" [ngClass]="{'bg-warning':!filter.noPostingData,'bg-primary text-white': filter.noPostingData}" (click)="filter.noPostingData=!filter.noPostingData; resetList();"> No Posting Data Bills : <strong>{{yellowBills}}</strong></span> -->
    </div>
  </div>
  <!-- <div class="separator-breadcrumb border-top mb-10 mt-10"></div> -->
  <div class="row mt-1">
    <div class="col-md-12">
      <loading [loading]="loading"></loading>
      <table class="tableBodyScroll table table-striped table-hover table-sm">
        <thead>
          <tr>
            <th *ngIf="!isHq" class="w-10 cursor" (click)="sortColBy('building.name')">Building &nbsp; <i *ngIf="sort['building.name']?.asc" class="fa fa-caret-up"></i><i *ngIf="sort['building.name']?.desc" class="fa fa-caret-down"></i></th>
            <th class="w-15 cursor" (click)="sortColBy('opexType.name')">Service &nbsp; <i *ngIf="sort['opexType.name']?.asc" class="fa fa-caret-up"></i><i *ngIf="sort['opexType.name']?.desc" class="fa fa-caret-down"></i></th>
            <th class="w-15 cursor" (click)="sortColBy('vendor.name')">Provider &nbsp; <i *ngIf="sort['vendor.name']?.asc" class="fa fa-caret-up"></i><i *ngIf="sort['vendor.name']?.desc" class="fa fa-caret-down"></i></th>
            <th class="w-10 text-center" (click)="sortColBy('refNo')">Bill No &nbsp; <i *ngIf="sort['refNo']?.asc" class="fa fa-caret-up"></i><i *ngIf="sort['refNo']?.desc" class="fa fa-caret-down"></i></th>
            <th class="w-10" (click)="sortColBy('opexPaymentId')">Bill Type &nbsp; <i *ngIf="sort['opexPaymentId']?.asc" class="fa fa-caret-up"></i><i *ngIf="sort['opexPaymentId']?.desc" class="fa fa-caret-down"></i></th>
            <th class="w-15 cursor">
              <span class="i-db float-left" (click)="sortColBy('date')">RaisedOn &nbsp; <i *ngIf="sort.date?.asc" class="fa fa-caret-up"></i><i *ngIf="sort.date?.desc" class="fa fa-caret-down"></i></span>
              <span class="i-db float-right" (click)="sortColBy('item.dateFrom')">Accounted &nbsp; <i *ngIf="sort.date?.asc" class="fa fa-caret-up"></i><i *ngIf="sort.date?.desc" class="fa fa-caret-down"></i></span>
            </th>
            <!-- <th class="w-5 cursor" (click)="sortColBy('item.dateFrom')">Accounted Month <i *ngIf="sort.date?.asc" class="fa fa-caret-up"></i><i *ngIf="sort.date?.desc" class="fa fa-caret-down"></i></th> -->
            <th class="w-10 text-right" (click)="sortColBy('amount')">Amount &nbsp; <i *ngIf="sort.amount?.asc" class="fa fa-caret-up"></i><i *ngIf="sort.amount?.desc" class="fa fa-caret-down"></i></th>
            <th class="w-5 text-center" (click)="sortColBy('status')">Status &nbsp; <i *ngIf="sort.status?.asc" class="fa fa-caret-up"></i><i *ngIf="sort.status?.desc" class="fa fa-caret-down"></i></th>
            <th class="w-10 text-center">Actions</th>
          </tr>
        </thead>
        <p *ngIf="!items.length" class="text-center mt-2 pt-2 f-b">No bills are added yet.</p>
        <tbody class="tableBodyScroll" infiniteScroll (onScroll)="loadMore()">
          <tr *ngFor="let bill of items;" class="{{bill.raisedMarker}}">
            <td *ngIf="!isHq" class="w-10">{{bill.building || '-'}}</td>
            <td class="w-15">{{bill.opexCategory || '-'}}, {{bill.opexType}} {{bill.opexItem}}</td>
            <td class="w-15">{{bill.providerName || bill.serviceProviderText || 'Not Applicable'}}</td>
            <td class="w-10 text-center" *ngIf="!bill.file">{{bill.refNo || '-'}}</td>
            <td class="w-10 text-center" *ngIf="bill.file"><a [href]="bill.file.url" target="_blank">{{bill.refNo || '-'}}</a></td>
            <td class="w-10">{{bill.opexPaymentId ? 'Recurring': 'OneTime'}}</td>
            <td class="w-15">
              <span ngbTooltip="Due by : {{bill.billDueDate | date : 'MMM dd, yyyy'}}">{{bill.billDate | date : 'MMM dd, yyyy'}}</span>
              <span class="float-right i-db">{{bill.dateFrom | date : 'MMM yyyy'}}</span>
            </td>
            <!-- <td class="w-10">{{bill.dateFrom | date : 'MMM yyyy'}}</td> -->
            <td class="w-10 text-right">{{bill.amount | inr}}</td>
            <td class="w-5 text-center" *ngIf="bill.status!='Paid'">{{bill.status}}</td>
            <td class="w-10 text-center" *ngIf="bill.status=='Paid'"><span ngbTooltip="{{bill.utr}}">{{bill.status}}</span></td>
            <!--   <ng-select class="mini" [items]="['Raised','Started','Closed','Declined']" [hideSelected]="true" [(ngModel)]="bill.status" [ngModelOptions]="{standalone: true}" (ngModelChange)="updatePOStatus(bill)" placeholder="Status"></ng-select> -->
            <!-- </td> -->
            <td class="w-10 text-center">
              <a class="btn btn-sm btn-icon btn-primary" href="#/purchases/purchaseorder/{{bill.id}}" target="_blank" ngbTooltip="View"><i class="fa fa-search"></i></a>
              <span *checkAccess="'accounts:approveBill'">
                <button class="btn btn-icon btn-sm btn-primary" ngbTooltip="Approve Bill" *ngIf="bill.status=='New'|| (bill.status=='PrePaid' && bill.opexTypeId)" (click)="approveBill(bill)">
                  <i class="fa fa-check"></i>
                </button>
              </span>
              <span *checkAccess="'accounts:approveBill'">
                <button class="btn btn-icon btn-sm btn-danger" ngbTooltip="Cancel Bill" *ngIf="bill.status=='New'|| bill.status=='Raised'" (click)="deleteBill(bill)">
                  <i class="fa fa-times"></i>
                </button>
              </span>
              <button class="btn btn-sm btn-icon btn-info" *ngIf="bill.status=='Draft' || bill.status=='Raised' || bill.status=='PrePaid' || bill.status=='New'|| bill.status=='Approved'|| bill.status=='Paid'|| (bill.status=='PrePaid' && !bill.opexTypeId)" (click)="openBillModal(bill)" ngbTooltip="Edit"><i class="fa fa-pencil"></i></button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
<ng-template #opexBillModal let-modal class="modal-lg">
  <loading [loading]="loading" [type]="'loader-bubble'"></loading>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">{{opexBill.id ? 'Edit Expense Bill' : 'New Expense Bill'}}</h4>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <form [formGroup]="form">
      <div class="row mt-1 mb-1" *ngIf="opexBill.amountType=='Variable'">
        <div class="col-8">
          Amount should be in range of {{opexBill.minCharge | inr}} - {{opexBill.maxCharge | inr}} to get AutoApproved.
        </div>
      </div>
      <div class="row">
        <div class="col-md-2 pr-0 form-group mb-1">
          <label for="roles">Bill Amount </label>
          <input type="number" class="form-control" placeholder="Enter Bill Amount" [(ngModel)]="opexBill.amount" formControlName="amount" [attr.disabled]="opexBill.amountType && opexBill.amountType!='Variable'?true:null">
        </div>
        <div class="col-md-2 pr-0 pl-1 form-group mb-1">
          <label for="roles">Bill Date</label>
          <input class="form-control" placeholder="Bill Date" [(ngModel)]="opexBill.billDate" formControlName="billDate" name="dp" ngbDatepicker (dateSelect)="dp.close()" #dp="ngbDatepicker" (focus)="dp.toggle()">
        </div>
        <div class="col-md-2 pr-0 pl-1 form-group mb-1">
          <label for="roles">Due Date</label>
          <input class="form-control" placeholder="Due Date" [(ngModel)]="opexBill.billDueDate" formControlName="billDueDate" name="dpd" ngbDatepicker (dateSelect)="dpd.close()" #dpd="ngbDatepicker" (focus)="dpd.toggle()">
        </div>
        <div class="col-md-4 pl-1 pr-0 col-12 mb-1">
          <p class="text-muted mb-0">Bill Image </p>
          <a class="f-b badge badge-success fs-12" *ngIf="opexBill.image?.file" [href]="opexBill.image?.file" target="_blank" ngbTooltip="Click to View">Uploaded & Verified</a>
          <span class="input-group" *ngIf="!opexBill.image?.file">
            <div class="custom-file" *ngIf="!opexBillImageFile">
              <input class="custom-file-input" id="opexBillImageId" (change)="opexBillImageFileChange($event)" type="file">
              <label class="custom-file-label" for="opexBillImageId">Choose file</label>
            </div>
            <div class="custom-file" *ngIf="opexBillImageFile">
              <span class="float-left">{{opexBillImageFile?.name}}</span>
              <i class="float-left fa fa-times fa-3x text-danger pl-2" ngbTooltip="Cancel this file" (click)="opexBillImageFile=null;"></i>
              <div class="mb-1">
                <div *ngIf="opexBillImageFileError">
                  {{ opexBillImageFileError.message }}
                </div>
                <div *ngIf="opexBillImageUploadResponse.status === 'error'">
                  {{ opexBillImageUploadResponse.message }}
                </div>
                <div *ngIf="opexBillImageUploadResponse.status === 'progress'">
                  <div role="progressbar" [style.width.%]="opexBillImageUploadResponse.message" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">
                    {{opexBillImageUploadResponse.message}}%
                  </div>
                </div>
              </div>
            </div>
            <div class="input-group-append">
              <span class="input-group-text cursor" (click)="uploadOpexBillImage()">Upload</span>
            </div>
          </span>
        </div>
        <div class="col-md-2 pl-1 form-group mb-1" *ngIf="opexBill.indexNo">
          <label for="roles">Index No</label>
          {{opexBill.indexNo}}
        </div>
      </div>
      <div class="row" *ngIf="(opexBill.amount && opexBill.billDate) || selectedVendor">
        <div class="form-group col-md-4" *ngIf="!selectedVendor">
          <label for="firstName">Select Vendor</label>
          <tag-input [formControl]="vendorControl" theme='primary' [(ngModel)]="selectedVendors" secondaryPlaceholder="Type Vendor name to search" (onTextChange)="onVendorSearch($event)" (onAdd)="vendorSelected($event)" maxItems="1" [onlyFromAutocomplete]="true">
            <tag-input-dropdown [autocompleteItems]="autocompleteVendors" [showDropdownIfEmpty]="true" [appendToBody]="false" [displayBy]="'name'" [identifyBy]="id">
              <ng-template let-item="item" let-index="index">
                {{item.name}}, {{item.address}} - {{item.description}}
              </ng-template>
            </tag-input-dropdown>
          </tag-input>
        </div>
        <div class="form-group col-md-4" *ngIf="selectedVendor">
          <label class="d-b">Selected Vendor</label>
          <strong>{{selectedVendor?.name}}- {{selectedVendor.description}}</strong>
          <button class="btn btn-sm btn-icon btn-danger float-right" (click)="selectedVendors=[];selectedVendor=null;"><i class="fa fa-times"></i></button>
        </div>
        <div class="col-md-2 form-group mb-1 mt-4 pt-1" *ngIf="!selectedVendor">
          <label class="checkbox checkbox-success">
            <input type="checkbox" [(ngModel)]="opexBill.noVendor" [ngModelOptions]="{standalone: true}">
            <span class="d-ib mt--10">Not Applicable</span>
            <span class="checkmark"></span>
          </label>
        </div>
        <div class="col-md-3 form-group mb-1" *ngIf="!isHq">
          <label for="roles">Building</label>
          <ng-select [items]="buildings" [closeOnSelect]="true" [hideSelected]="true" bindLabel="name" placeholder="Select Building" [(ngModel)]="opexBill.building" formControlName="buildingId" (ngModelChange)="opexBill.office=null;onBuildingSelected()">
          </ng-select>
        </div>
        <div class="col-md-3 form-group mb-1" *ngIf="opexBill.building">
          <label for="roles">Floor</label>
          <ng-select [items]="offices" [closeOnSelect]="true" [hideSelected]="true" bindLabel="name" placeholder="Select Office" [(ngModel)]="opexBill.office" formControlName="officeId">
          </ng-select>
        </div>
      </div>
      <div class="row mt-2" *ngIf="selectedVendor||opexBill.noVendor">
        <div class="col-md-4 form-group mb-1">
          <label for="roles">Expense Category</label>
          <ng-select [items]="opexCategories" [closeOnSelect]="true" [hideSelected]="true" bindLabel="name" placeholder="Select Expense Category" [(ngModel)]="opexCategory" [ngModelOptions]="{standalone: true}">
          </ng-select>
        </div>
        <div class="col-md-4 form-group mb-1" *ngIf="opexCategory?.types.length">
          <label for="roles">Expense Type</label>
          <ng-select [items]="opexCategory.types" [closeOnSelect]="true" [hideSelected]="true" bindLabel="name" placeholder="Select Expense Type" [(ngModel)]="opexType" (ngModelChange)="opexItem=null;onOpexTypeSelected();" [ngModelOptions]="{standalone: true}">
          </ng-select>
        </div>
        <div class="col-md-4 form-group mb-1" *ngIf="opexType?.items.length">
          <label for="roles">Expense Item</label>
          <ng-select [items]="opexType.items" [closeOnSelect]="true" [hideSelected]="true" bindLabel="name" placeholder="Select Expense Item" [(ngModel)]="opexItem" [ngModelOptions]="{standalone: true}" (ngModelChange)="onOpexTypeSelected();">
          </ng-select>
        </div>
      </div>
      <div class="row mt-2">
        <div class="col-md-12" *ngIf="opexBill.image?.file">
          <table class="tableBodyScroll table table-striped table-hover table-sm">
            <thead>
              <tr>
                <th class="w-15 text-center">GST Slab</th>
                <th class="w-15 text-center">IGST</th>
                <th class="w-15 text-center">CGST</th>
                <th class="w-15 text-center">SGST</th>
                <th class="w-15 text-center">Total</th>
                <!-- <th class="w-20 text-center">TDS</th> -->
              </tr>
            </thead>
            <tbody class="tableBodyScroll">
              <tr *ngFor="let slab of opexBill.gstSlabs;">
                <td class="w-15 text-center">{{slab.slab}}%</td>
                <td class="w-15 text-center">{{slab.igst | inr}}</td>
                <td class="w-15 text-center">{{slab.cgst | inr}}</td>
                <td class="w-15 text-center">{{slab.sgst | inr}}</td>
                <td class="w-15 text-center">{{slab.gst | inr}}</td>
                <td class="w-20 text-center">
                  <!-- {{slab.tds | inr}} -->
                  <button class="btn btn-danger btn-sm btn-icon float-right" ngbTooltip="Delete" (click)="removeGstSlab(slab);"><i class="fa fa-times"></i></button></td>
              </tr>
            </tbody>
          </table>
          <p class="text-center p-2" *ngIf="!opexBill.gstSlabs?.length">No GST slabs are added yet.</p>
        </div>
        <div class="col-md-12 row mt-2" *ngIf="opexBill?.image?.file">
          <div class="col-md-2 text-center">
            <ng-select [items]="['0','5','12','18','28']" [closeOnSelect]="true" [hideSelected]="true" placeholder="Select Slab" [(ngModel)]="slab.slab" [ngModelOptions]="{standalone:true}">
            </ng-select>
          </div>
          <div class="col-md-2 text-center"><input type="number" placeholder="IGST" class="form-control" [(ngModel)]="slab.igst" (ngModelChange)="updateSlabGST()" [ngModelOptions]="{standalone:true}" /></div>
          <div class="col-md-2 text-center"><input type="number" placeholder="CGST" class="form-control" [(ngModel)]="slab.cgst" (ngModelChange)="updateSlabGST()" [ngModelOptions]="{standalone:true}" /></div>
          <div class="col-md-2 text-center"><input type="number" placeholder="SGST" class="form-control" [(ngModel)]="slab.sgst" (ngModelChange)="updateSlabGST()" [ngModelOptions]="{standalone:true}" /></div>
          <div class="col-md-2 text-center">{{slab.gst | inr}}</div>
          <div class="col-md-2 text-center pr-0">
            <!-- <input type="number" placeholder="TDS" class="form-control float-left w-70" [(ngModel)]="slab.tds" [ngModelOptions]="{standalone:true}" /> -->
            <button class="btn btn-primary btn-sm btn-icon float-right" ngbTooltip="Add" (click)="addGstSlab(slab);" [disabled]="!slab.gst && slab.slab!='0'"><i class="fa fa-plus"></i></button>
          </div>
        </div>
        <div class="col-md-6 mt-2">
        </div>
        <div class="col-md-6 mt-2" *ngIf="opexBill.gstSlabs?.length">
          <label class="mb-0">GST File</label>
          <span>
            <a class=" ml-2 f-b badge badge-secondary fs-10" *ngIf="opexBill?.gstFile?.file" [href]="opexBill?.gstFile?.file" target="_blank" ngbTooltip="Click to View">View Uploaded GST File </a>&nbsp;&nbsp; <i class="fa fa-times" *ngIf="opexBill?.gstFile" (click)="opexBill.gstFile=null;opexBill.gstFileId=null;" ngbTooltip="Remove GST File"></i>
          </span>
          <span class="input-group" *ngIf="!opexBill?.gstFile?.file">
            <div class="custom-file" *ngIf="!gstFile">
              <input class="custom-file-input" id="gstId" (change)="gstFileChange($event)" type="file">
              <label class="custom-file-label" for="gstId">Choose file</label>
            </div>
            <div class="custom-file" *ngIf="gstFile">
              <span class="float-left">{{gstFile?.name}}</span>
              <i class="float-left fa fa-times fa-3x text-danger pl-2" ngbTooltip="Cancel this file" (click)="gstFile=null;"></i>
              <div class="mb-1">
                <div *ngIf="gstFileError">
                  {{ gstFileError.message }}
                </div>
                <div *ngIf="gstUploadResponse.status === 'error'">
                  {{ gstUploadResponse.message }}
                </div>
                <div *ngIf="gstUploadResponse.status === 'progress'">
                  <div role="progressbar" [style.width.%]="gstUploadResponse.message" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">
                    {{gstUploadResponse.message}}%
                  </div>
                </div>
              </div>
            </div>
            <div class="input-group-append">
              <span class="input-group-text cursor" (click)="uploadGSTFile()">Upload</span>
            </div>
          </span>
        </div>
      </div>
      <div class="row mt-2">
        <div class="col-md-12 mb-1">
          <div class="float-left fs-14 f-b">Accounted Months</div>
          <div class="float-left"><input type="number" placeholder="Months" class="form-control ml-1 w-30 mini" ngbTooltip="Months Count" [(ngModel)]="billItemMonths" (ngModelChange)="updateBillItemMonths()" [ngModelOptions]="{standalone:true}" /></div>
        </div>
        <div class="col-md-12 row f-b fs-12">
          <div class="col-md-2 pr-0">Taxable Amount</div>
          <div class="col-md-2 pl-1 pr-0">GST</div>
          <div class="col-md-2 pl-1 pr-0">TDS</div>
          <div class="col-md-2 pl-1 pr-0">Amount</div>
          <div class="col-md-4 pl-1 text-center">Month, Year</div>
        </div>
        <div class="col-md-12 row" *ngFor="let item of billItems;">
          <div class="col-md-2 pr-0 text-center"><input type="number" placeholder="TaxableAmount" class="form-control" [(ngModel)]="item.taxableAmount" (ngModelChange)="updateSlabGST()" [ngModelOptions]="{standalone:true}" /></div>
          <div class="col-md-2 pl-1 pr-0 text-center"><input type="number" placeholder="GST" class="form-control" [(ngModel)]="item.gst" (ngModelChange)="updateSlabGST()" [ngModelOptions]="{standalone:true}" /></div>
          <div class="col-md-2 pl-1 pr-0 text-center"><input type="number" placeholder="TDS" class="form-control" [(ngModel)]="item.tds" (ngModelChange)="updateSlabGST()" [ngModelOptions]="{standalone:true}" /></div>
          <div class="col-md-2 pl-1 pr-0 text-center"><input type="number" placeholder="Amount" class="form-control" [(ngModel)]="item.amount" (ngModelChange)="updateSlabGST()" [ngModelOptions]="{standalone:true}" /></div>
          <div class="col-md-4 pl-1 text-center">
            <ng-select [items]="billMonths" [closeOnSelect]="true" [hideSelected]="true" placeholder="Month" [(ngModel)]="item.month" bindLabel="name" bindValue="id" [ngModelOptions]="{standalone:true}" class="w-50 float-left"></ng-select>
            <ng-select [items]="['2020','2019']" [closeOnSelect]="true" [hideSelected]="true" placeholder="Year" [(ngModel)]="item.year" [ngModelOptions]="{standalone:true}" class="w-40 float-left ml-5">
            </ng-select>
          </div>
        </div>
      </div>
    </form>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-outline-light" (click)="modal.close('close click')">Close</button>
    <button class="btn btn-info ladda-button btn-ico" [ladda]="loading" [disabled]="loading||form.invalid" (click)="save()"><i class="fa fa-check" *ngIf="!loading"></i> Save</button>
    <!-- <button class="btn btn-success ladda-button btn-ico" *ngIf="opexBill.indexNo && opexBill.paymentMode!='BankTransfer'" [ladda]="loading" [disabled]="loading||portalPaidForm.invalid" (click)="markAsPaid()"><i class="fa fa-check" *ngIf="!loading"></i> Mark as Paid</button> -->
  </div>
</ng-template>